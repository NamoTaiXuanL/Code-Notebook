# 代码查看器 (Code Notebook)

一个简洁的代码文件查看工具，支持多种编程语言语法高亮和文件拖拽。

## 功能特点

- ✅ **隐藏命令行界面** - 运行时不会显示黑色控制台窗口
- ✅ **拖拽支持** - 直接将代码文件拖拽到窗口即可查看
- ✅ **右键菜单集成** - 安装后可在文件右键菜单中选择"使用代码查看器打开"
- ✅ **文件关联** - 可设置为默认代码文件查看器
- ✅ **中文支持** - 完美支持中文显示和输入
- ✅ **多语言支持** - 支持 Rust、C/C++、Python、JavaScript、Java 等主流语言
- ✅ **语法高亮** - 自动识别代码语法并高亮显示

## 构建和安装

### 自动构建（推荐）

运行自动构建脚本：

```batch
build_installer.bat
```

这个脚本会：
1. 清理之前的构建
2. 编译 release 版本
3. 生成 NSIS 安装包

### 手动构建

1. **编译程序**：
```bash
cargo build --release
```

2. **生成安装包**（需要安装 NSIS）：
```bash
makensis installer.nsi
```

## 使用方法

### 方法一：直接运行
双击 `code_notebook.exe` 启动程序，然后将代码文件拖拽到窗口中。

### 方法二：右键菜单
安装后，右键点击任意代码文件，选择"使用代码查看器打开"。

### 方法三：命令行
```bash
code_notebook.exe 文件路径
```

## 支持的文件类型

- **Rust** (.rs)
- **C/C++** (.c, .cpp, .h, .hpp)
- **Python** (.py)
- **JavaScript** (.js, .jsx)
- **TypeScript** (.ts, .tsx)
- **Java** (.java)
- **C#** (.cs)
- **PHP** (.php)
- **Ruby** (.rb)
- **Go** (.go)
- **Swift** (.swift)
- **Kotlin** (.kt)
- **Scala** (.scala)
- **Web** (.html, .css, .scss, .sass, .xml)
- **配置** (.json, .yaml, .yml, .toml, .ini, .cfg, .conf)
- **脚本** (.sh, .bat, .cmd, .ps1)
- **其他** (.sql, .md, .txt)

## 系统要求

- Windows 10 或更高版本
- 至少 10MB 可用磁盘空间

## 安装选项

安装程序提供以下可选组件：

1. **主程序**（必需）
   - 安装核心程序文件

2. **右键菜单集成**（推荐）
   - 在文件右键菜单中添加"使用代码查看器打开"选项

3. **文件关联**（可选）
   - 将程序设置为默认代码文件查看器
   - 注意：此选项会更改系统默认文件关联

## 卸载

使用 Windows 的"程序和功能"或开始菜单中的"卸载"选项即可完全卸载。

## 技术实现

- **GUI 框架**：eframe (egui)
- **编程语言**：Rust
- **安装工具**：NSIS
- **中文字体**：微软雅黑

## 故障排除

### 问题：启动时显示控制台窗口
**解决方案**：确保使用 build.rs 中配置的 Windows 子系统编译。

### 问题：中文显示乱码
**解决方案**：程序会自动尝试加载系统字体，如果仍有问题请确保系统中安装了中文字体。

### 问题：安装包生成失败
**解决方案**：
1. 确保已安装 NSIS：https://nsis.sourceforge.io/
2. 确保 NSIS 已添加到系统 PATH 环境变量

## 开发说明

项目结构：
```
code_notebook/
├── src/
│   └── main.rs          # 主程序源码
├── build.rs             # 构建脚本（Windows子系统配置）
├── installer.nsi        # NSIS安装脚本
├── build_installer.bat  # 自动构建脚本
├── LICENSE.txt          # 许可证
└── README.md           # 说明文档
```

## 许可证

本软件为免费软件，可自由使用、分发和修改。详见 LICENSE.txt。

## 更新日志

### v0.1.0
- 初始版本发布
- 支持基本的代码文件查看
- 隐藏命令行界面
- 右键菜单集成
- 文件关联功能